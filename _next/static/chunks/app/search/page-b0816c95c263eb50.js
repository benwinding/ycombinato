(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{2064:function(e,t,n){Promise.resolve().then(n.bind(n,5966))},7862:function(e,t,n){"use strict";n.d(t,{E:function(){return i}});var r=n(9077),s=n(988),a=n(1821);let i=new r.QueryClient({defaultOptions:{queries:{cacheTime:36e5}}}),c=(0,s.O)({storage:(()=>{try{return window.localStorage}catch(e){return null}})()});(0,a.w)({queryClient:i,persistor:c,maxAge:36e5,hydrateOptions:{},dehydrateOptions:{}})},5966:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Page}});var r=n(7437),s=n(4300),a=n(2466),i=n(2265);function MagnifyingGlassCircleIcon({title:e,titleId:t,...n},r){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?i.createElement("title",{id:t},e):null,i.createElement("path",{d:"M8.25 10.875a2.625 2.625 0 115.25 0 2.625 2.625 0 01-5.25 0z"}),i.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.125 4.5a4.125 4.125 0 102.338 7.524l2.007 2.006a.75.75 0 101.06-1.06l-2.006-2.007a4.125 4.125 0 00-3.399-6.463z",clipRule:"evenodd"}))}let c=i.forwardRef(MagnifyingGlassCircleIcon);var o=n(4973);function ResultsPageViewer(e){let t=e.data,n=e.data.page,s=e.data.hitsPerPage;return(0,r.jsx)("div",{className:"flex flex-col gap-1 font-sans",children:t.hits.map((e,t)=>(0,r.jsx)(o.Z,{index:t+1+s*n,item:e},e.objectID))})}var u=n(9077);function useHnSearch(e){let t=getQueryKey(e),n=getQueryUrl(e);return useHnQuery(n,t)}function useHnQuery(e,t){return(0,u.useQuery)(t,()=>fetchHackerNewsFrontPage(e))}function getQueryKey(e){return"".concat(e.text,"_").concat(e.minimumPoints,"_").concat(e.afterISeconds,"_").concat(e.beforeISeconds,"_").concat(e.pageSize,"_").concat(e.page)}async function fetchHackerNewsFrontPage(e){return fetch(e).then(e=>e.json())}function getQueryUrl(e){let t=new HnQueryBuilder;return t.addTag("story"),t.addPageSize(e.pageSize),t.addPage(Number(e.page)-1),t.addText(e.text),e.minimumPoints>0&&t.addPoints(e.minimumPoints),t.addCreatedBeforeAfter({after:e.afterISeconds,before:e.beforeISeconds}),t.build()}let HnQueryBuilder=class HnQueryBuilder{addCreatedBeforeAfter(e){return this.numericFiltersString+="created_at_i>".concat(e.after,",created_at_i<").concat(e.before,"&"),this}addTag(e){return this.queryString+="tags=".concat(e,"&"),this}addPage(e){return this.queryString+="page=".concat(e,"&"),this}addText(e){return this.queryString+="query=".concat(e,"&"),this}addPoints(e){return this.numericFiltersString+="points>".concat(e,"&"),this}addPageSize(e){return this.queryString+="hitsPerPage=".concat(e,"&"),this}build(){let e="".concat(this.baseUrl).concat(this.path,"?").concat(this.queryString,"numericFilters=").concat(this.numericFiltersString);return e}constructor(){this.queryString="",this.numericFiltersString="",this.baseUrl="https://hn.algolia.com/api/v1/",this.path="search_by_date"}};var l=n(7766),d=n(1983),m=n(7862);function Page(){let{currentParams:e,patchQueryParams:t}=(0,s.K)({defaultParams:{text:"",afterISeconds:0,minimumPoints:0,beforeISeconds:l.q.now().formatAsHnSeconds(),page:1,pageSize:30}}),[n,a]=(0,i.useState)(e);i.useEffect(()=>{a(e)},[e]);let executeSearch=()=>{t(n)};return(0,r.jsxs)("main",{className:"flex min-h-screen flex-col items-center justify-between p-3",children:[(0,r.jsxs)("div",{className:"z-10 w-full max-w-5xl flex flex-col font-mono text-sm lg:flex",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(FilterText,{onChange:e=>a(t=>({...t,text:e})),onEnter:executeSearch,value:n.text}),(0,r.jsx)(SearchButton,{onClick:executeSearch})]}),(0,r.jsxs)("div",{className:"pl-1 py-2 flex gap-3 items-center flex-wrap",children:[(0,r.jsx)(DateSelect,{label:"After >",valueDateString:l.q.fromHn({seconds:n.afterISeconds}).formatAsDateString(),onChange:e=>a(t=>({...t,afterISeconds:l.q.fromDateObj({dateObj:e}).formatAsHnSeconds()}))}),(0,r.jsx)("span",{children:"and"}),(0,r.jsx)(DateSelect,{label:"Before <",valueDateString:l.q.fromHn({seconds:n.beforeISeconds}).formatAsDateString(),onChange:e=>a(t=>({...t,beforeISeconds:l.q.fromDateObj({dateObj:e}).formatAsHnSeconds()}))}),(0,r.jsx)(RangeSelect,{label:"Minimum points",value:n.minimumPoints,max:1e3,onChange:e=>a(t=>({...t,minimumPoints:e}))})]})]}),(0,r.jsx)(u.QueryClientProvider,{client:m.E,children:(0,r.jsx)(f,{...e})})]})}function FilterText(e){return(0,r.jsxs)("div",{className:"flex w-full",children:[(0,r.jsx)("input",{className:"border rounded-md px-2 py-1 w-full",placeholder:"Search posts...",onChange:t=>e.onChange(t.target.value),onKeyDown:t=>{"Enter"===t.key&&e.onEnter()},value:e.value}),(0,r.jsx)("button",{onClick:()=>e.onChange(""),className:"-ml-6 text-gray-400",children:(0,r.jsx)(a.Z,{width:20})})]})}function DateSelect(e){let onInput=t=>{e.onChange(new Date(t))};return(0,r.jsxs)("label",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"text-xs",children:e.label}),(0,r.jsx)("input",{type:"date",value:e.valueDateString,onChange:e=>onInput(e.target.value)})]})}function RangeSelect(e){let t=e.value>0?e.value:"disabled";return(0,r.jsxs)("label",{className:"flex flex-col",children:[(0,r.jsxs)("span",{className:"text-xs",children:[e.label," (",t,")"]}),(0,r.jsx)("input",{type:"range",max:e.max,step:1,min:0,value:e.value,onChange:t=>e.onChange(Number(t.target.value))})]})}function SearchButton(e){return(0,r.jsxs)("button",{onClick:e.onClick,role:"button",className:"bg-gray-200 rounded cursor-pointer px-2 py-1 gap-2 flex flex-row items-center",children:["Search ",(0,r.jsx)(c,{width:20})]})}let f=i.memo(function(e){let t=useHnSearch(e);return t.isLoading?(0,r.jsx)(d.a,{}):t.error?(0,r.jsx)("div",{children:t.error.toString()}):t.data?(0,r.jsx)(ResultsPageViewer,{data:t.data}):null})},1170:function(e,t,n){"use strict";n.d(t,{Av:function(){return LinkToAuthor},It:function(){return LinkToDiscussionWrapper},dL:function(){return ExternalLink},iR:function(){return LinkToDiscussion}});var r=n(7437),s=n(7766);function ExternalLink(e){return(0,r.jsx)("a",{href:e.href,target:"_blank",referrerPolicy:"no-referrer",className:"hover:underline "+e.className,children:e.children})}function LinkToAuthor(e){let t="https://news.ycombinator.com/user?id=".concat(e.author);return(0,r.jsx)(ExternalLink,{href:t,className:e.className,children:e.author})}function LinkToDiscussion(e){return(0,r.jsx)(LinkToDiscussionWrapper,{discussionId:e.discussionId,className:e.className,children:(0,s._)(e.createdAt)})}function LinkToDiscussionWrapper(e){let t="https://news.ycombinator.com/item?id=".concat(e.discussionId);return(0,r.jsx)(ExternalLink,{href:t,className:e.className,children:e.children})}n(2265)},4973:function(e,t,n){"use strict";n.d(t,{Z:function(){return FrontPageItem}});var r=n(7437),s=n(1170),a=n(6750);function FrontPageItem(e){let{item:t,index:n}=e,i=null!=t.url?(0,r.jsx)(s.dL,{href:t.url,children:t.title}):(0,r.jsx)(a.h$,{href:"/item?id=".concat(t.objectID),children:t.title});return(0,r.jsxs)("div",{className:"flex flex-row items-start gap-1",children:[(0,r.jsxs)("span",{children:[n,"."]}),(0,r.jsxs)("div",{className:"flex flex-col",children:[i,(0,r.jsxs)("div",{className:"flex items-center flex-wrap gap-1 text-gray-500 text-xxs sm:text-xs",children:[(0,r.jsxs)("p",{className:"flex-shrink-0",children:[t.points," points by"]}),(0,r.jsx)(s.Av,{author:t.author}),(0,r.jsx)(a.C2,{discussionId:Number(t.objectID),createdAt:t.created_at}),(0,r.jsx)("span",{children:"|"}),(0,r.jsxs)(a.oo,{discussionId:Number(t.objectID),children:[t.num_comments," comments"]})]})]})]})}},6750:function(e,t,n){"use strict";n.d(t,{C2:function(){return ILinkToDiscussion},h$:function(){return InternalLink},oo:function(){return ILinkToDiscussionWrapper}});var r=n(7437),s=n(7766),a=n(1396),i=n.n(a);function InternalLink(e){return(0,r.jsx)(i(),{href:e.href,className:"hover:underline "+e.className,children:e.children})}function ILinkToDiscussion(e){return(0,r.jsx)(ILinkToDiscussionWrapper,{discussionId:e.discussionId,className:e.className,children:(0,s._)(e.createdAt)})}function ILinkToDiscussionWrapper(e){let t="/item?id=".concat(e.discussionId);return(0,r.jsx)(InternalLink,{href:t,className:e.className,children:e.children})}n(2265)},1983:function(e,t,n){"use strict";n.d(t,{a:function(){return LoadingScreen}});var r=n(7437),s=n(2265);let a=["⊖_⊖","⊜_⊜","⊙_⊙"];function LoadingScreen(){let[e,t]=s.useState(0);return useTimeout(()=>{let n=(e+1)%a.length;t(n)},2e3*Math.random()),(0,r.jsxs)("div",{className:"flex flex-col items-center py-40 w-full",children:[(0,r.jsx)("p",{className:"text-3xl font-mono text-gray-600 pb-10",children:"Loading..."}),(0,r.jsx)("p",{className:"text-4xl font-mono whitespace-pre text-gray-400",children:a[e]})]})}function useTimeout(e,t){s.useEffect(()=>{let n=setTimeout(()=>{e()},t);return()=>{clearTimeout(n)}},[e,t])}},7766:function(e,t,n){"use strict";n.d(t,{_:function(){return getFromNowStr},q:function(){return Time}});var r=n(4548),s=n.n(r),a=n(6537),i=n.n(a);function getFromNowStr(e){return s()(e).fromNow()}s().extend(i());let Time=class Time{static fromIso(e){let t=Number(s()(e.dateIso).toDate());return new Time(t)}static fromHn(e){return new Time(1e3*e.seconds)}static fromDateString(e){let t=Number(s()(e.dateString,"YYYY-MM-DD").toDate());return new Time(t)}static fromDateObj(e){let t=Number(s()(e.dateObj).toDate());return new Time(t)}static now(){let e=Number(s()(new Date).toDate());return new Time(e)}formatAsHnSeconds(){return Math.round(this.ms/1e3)}formatFromNow(){return s()(this.ms).fromNow()}formatAsDateString(){return s()(this.ms).format("YYYY-MM-DD")}endOfDay(){let e=s()(this.ms).set("hours",23).set("minutes",59).set("seconds",59);return this.ms=Number(e.toDate()),this}startOfDay(){let e=s()(this.ms).set("hours",0).set("minutes",0).set("seconds",1);return this.ms=Number(e.toDate()),this}subtract1Day(){return this.ms=Number(s()(this.ms).subtract(24,"hours").toDate()),this}add1Day(){return this.ms=Number(s()(this.ms).add(24,"hours").toDate()),this}constructor(e){this.ms=e}}},4300:function(e,t,n){"use strict";n.d(t,{K:function(){return useQueryParams}});var r=n(4033),s=n(2265);function useSearchParamsWrapper(e){let t=(0,r.useSearchParams)(),[n,a]=s.useState(e);return s.useEffect(()=>{let r=Array.from(t.entries()).some(e=>{let[t,r]=e;return n[t]!==r});if(r){let r=Object.entries(e).reduce((e,n)=>{let[r,s]=n;return e[r]=t.get(r)||s,e},{});a({...n,...r})}},[e,t,n]),n}function useQueryParams(e){let t=useSearchParamsWrapper(e.defaultParams),n=(0,r.useRouter)(),a=(0,r.usePathname)(),i=s.useCallback(e=>{let t=new URLSearchParams(window.location.search),r=Array.from(t.entries()).reduce((e,t)=>{let[n,r]=t;return e[n]=r,e},{}),s={...r,...e},i=Object.entries(s).map(e=>{let[t,n]=e;return"".concat(t,"=").concat(n)}).join("&");n.push(a+"?".concat(i))},[a,n]);return{currentParams:t,patchQueryParams:i}}},1396:function(e,t,n){e.exports=n(8326)},2466:function(e,t,n){"use strict";var r=n(2265);function XCircleIcon({title:e,titleId:t,...n},s){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:s,"aria-labelledby":t},n),e?r.createElement("title",{id:t},e):null,r.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.72 6.97a.75.75 0 10-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 101.06 1.06L12 13.06l1.72 1.72a.75.75 0 101.06-1.06L13.06 12l1.72-1.72a.75.75 0 10-1.06-1.06L12 10.94l-1.72-1.72z",clipRule:"evenodd"}))}let s=r.forwardRef(XCircleIcon);t.Z=s}},function(e){e.O(0,[326,244,971,472,744],function(){return e(e.s=2064)}),_N_E=e.O()}]);