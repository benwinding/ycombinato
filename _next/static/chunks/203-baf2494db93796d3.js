(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[203],{7862:function(e,t,r){"use strict";r.d(t,{E:function(){return i}});var n=r(9077),s=r(988),a=r(1821);let i=new n.QueryClient({defaultOptions:{queries:{cacheTime:36e5}}}),o=(0,s.O)({storage:(()=>{try{return window.localStorage}catch(e){return null}})()});(0,a.w)({queryClient:i,persistor:o,maxAge:36e5,hydrateOptions:{},dehydrateOptions:{}})},1170:function(e,t,r){"use strict";r.d(t,{Av:function(){return LinkToAuthor},It:function(){return LinkToDiscussionWrapper},dL:function(){return ExternalLink},iR:function(){return LinkToDiscussion}});var n=r(7437),s=r(7766);function ExternalLink(e){return(0,n.jsx)("a",{href:e.href,target:"_blank",referrerPolicy:"no-referrer",className:"hover:underline "+e.className,children:e.children})}function LinkToAuthor(e){let t="https://news.ycombinator.com/user?id=".concat(e.author);return(0,n.jsx)(ExternalLink,{href:t,className:e.className,children:e.author})}function LinkToDiscussion(e){return(0,n.jsx)(LinkToDiscussionWrapper,{discussionId:e.discussionId,className:e.className,children:(0,s._)(e.createdAt)})}function LinkToDiscussionWrapper(e){let t="https://news.ycombinator.com/item?id=".concat(e.discussionId);return(0,n.jsx)(ExternalLink,{href:t,className:e.className,children:e.children})}r(2265)},4973:function(e,t,r){"use strict";r.d(t,{Z:function(){return FrontPageItem}});var n=r(7437),s=r(1170),a=r(6750);function FrontPageItem(e){let{item:t,index:r}=e,i=null!=t.url?(0,n.jsx)(s.dL,{href:t.url,children:t.title}):(0,n.jsx)(a.h$,{href:"/item?id=".concat(t.objectID),children:t.title});return(0,n.jsxs)("div",{className:"flex flex-row items-start gap-1",children:[(0,n.jsxs)("span",{children:[r,"."]}),(0,n.jsxs)("div",{className:"flex flex-col",children:[i,(0,n.jsxs)("div",{className:"flex items-center flex-wrap gap-1 text-gray-500 text-xxs sm:text-xs",children:[(0,n.jsxs)("p",{className:"flex-shrink-0",children:[t.points," points by"]}),(0,n.jsx)(s.Av,{author:t.author}),(0,n.jsx)(a.C2,{discussionId:Number(t.objectID),createdAt:t.created_at}),(0,n.jsx)("span",{children:"|"}),(0,n.jsxs)(a.oo,{discussionId:Number(t.objectID),children:[t.num_comments," comments"]})]})]})]})}},6750:function(e,t,r){"use strict";r.d(t,{C2:function(){return ILinkToDiscussion},h$:function(){return InternalLink},oo:function(){return ILinkToDiscussionWrapper}});var n=r(7437),s=r(7766),a=r(1396),i=r.n(a);function InternalLink(e){return(0,n.jsx)(i(),{href:e.href,className:"hover:underline "+e.className,children:e.children})}function ILinkToDiscussion(e){return(0,n.jsx)(ILinkToDiscussionWrapper,{discussionId:e.discussionId,className:e.className,children:(0,s._)(e.createdAt)})}function ILinkToDiscussionWrapper(e){let t="/item?id=".concat(e.discussionId);return(0,n.jsx)(InternalLink,{href:t,className:e.className,children:e.children})}r(2265)},3107:function(e,t,r){"use strict";r.d(t,{E:function(){return RadioButton}});var n=r(7437);function RadioButton(e){let{label:t,value:r,checked:s,onChange:a}=e;return(0,n.jsxs)("label",{className:"text-xs flex items-center gap-1",children:[(0,n.jsx)("input",{type:"radio",value:r,checked:s,onChange:a}),t]})}},4466:function(e,t,r){"use strict";r.d(t,{j:function(){return FrontPageViewerWrapper}});var n=r(7437),s=r(9077),a=r(7862),i=r(7766);function useHnPage(e){let t=getQueryKey(e),r=(0,s.useQuery)(t,()=>fetchHackerNewsFrontPage(e));return r}function getQueryKey(e){return"front_page"===e.tag?"front_page_".concat(e.pageSize,"_").concat(e.page):"".concat(e.tag,"_").concat(e.date,"_").concat(e.pageSize,"_").concat(e.page)}async function fetchHackerNewsFrontPage(e){let t=getQueryUrl(e);return fetch(t).then(e=>e.json())}function getQueryUrl(e){let t=new QueryBuilder;return t.addTag(e.tag),t.addPageSize(e.pageSize),t.addPage(Number(e.page)-1),"front_page"!==e.tag&&(t.setPath("search_by_date"),t.addCreatedBeforeAfter({after:i.q.fromDateString({dateString:e.date}).setClockNow().subtract1Day().formatAsHnSeconds(),before:i.q.fromDateString({dateString:e.date}).setClockNow().formatAsHnSeconds()})),t.build()}let QueryBuilder=class QueryBuilder{setPath(e){return this.path=e,this}addTag(e){return this.queryString+="tags=".concat(e,"&"),this}addCreatedBeforeAfter(e){return this.queryString+="numericFilters=created_at_i>".concat(e.after,",created_at_i<").concat(e.before,"&"),this}addPage(e){return this.queryString+="page=".concat(e,"&"),this}addPageSize(e){return this.queryString+="hitsPerPage=".concat(e,"&"),this}build(){let e="".concat(this.baseUrl).concat(this.path,"?").concat(this.queryString);return e}constructor(){this.queryString="",this.baseUrl="https://hn.algolia.com/api/v1/",this.path="search"}};var o=r(4973);function FrontPageViewer(e){let t=e.data,r=e.data.page,s=e.data.hitsPerPage;return(0,n.jsx)("div",{className:"flex flex-col gap-1 font-sans",children:t.hits.map((e,t)=>(0,n.jsx)(o.Z,{index:t+1+s*r,item:e},e.objectID))})}var u=r(2265),c=r(2154);function FrontPageFooter(e){let t=Array(e.pageCount).fill(0).map((e,t)=>"".concat(t+1)),{patchQueryParams:r}=(0,c.Fs)();return(0,n.jsx)("div",{className:"flex gap-2 pt-4 justify-center w-full flex-wrap",children:t.map(e=>(0,n.jsx)("span",{className:"cursor-pointer hover:underline",onClick:()=>r({page:e}),children:e},e))})}var l=r(1983),d=r(3107);function FrontPageViewerWrapper(e){return(0,n.jsx)(s.QueryClientProvider,{client:a.E,children:(0,n.jsx)(PageViewer,{...e})})}function PageViewer(e){let t=useHnPage(e),[r,s]=(0,u.useState)("Sort by points"),a=useFrontPageSort(t.data,r),{patchQueryParams:o}=(0,c.Fs)();if(t.isLoading)return(0,n.jsx)(l.a,{});if("error"===t.status)return(0,n.jsxs)("div",{children:["Problem loading data, err: ",t.error+""]});if(!t.data||!a)return(0,n.jsx)("div",{children:"No data?..."});let d="front_page"!==e.tag,m=d&&(0,n.jsx)(DateButtons,{date:e.date,onClickYesterday:()=>{o({date:i.q.fromDateString({dateString:e.date}).subtract1Day().formatAsDateString(),page:"1"})},onClickTomorrow:()=>{o({date:i.q.fromDateString({dateString:e.date}).add1Day().formatAsDateString(),page:"1"})}});return(0,n.jsxs)("div",{className:"flex flex-col w-full",children:[(0,n.jsx)("div",{className:"pb-3",children:m}),(0,n.jsx)(SortOptions,{value:r,onChange:s}),(0,n.jsx)(FrontPageViewer,{data:a}),(0,n.jsx)(FrontPageFooter,{pageCount:t.data.nbPages}),(0,n.jsx)("table",{children:(0,n.jsxs)("tbody",{children:[(0,n.jsx)(OptionRow,{label:"Per page",option:(0,n.jsx)(PerPageOptions,{value:e.pageSize,onChange:e=>o({perPage:e})})}),d&&(0,n.jsx)(OptionRow,{label:"Date",option:(0,n.jsx)(DateSelect,{valueDateString:e.date,onChange:e=>o({date:i.q.fromDateObj({dateObj:e}).formatAsDateString(),page:"1"})})}),d&&(0,n.jsx)(OptionRow,{label:"",option:m})]})})]})}function OptionRow(e){return(0,n.jsxs)("tr",{className:"py-1",children:[(0,n.jsx)("td",{className:"pr-2 w-24",children:e.label}),(0,n.jsx)("td",{className:"",children:e.option})]})}function PerPageOptions(e){return(0,n.jsxs)("select",{value:e.value,className:"border border-gray-300 p-1",onChange:t=>e.onChange(t.target.value),children:[(0,n.jsx)("option",{children:"50"}),(0,n.jsx)("option",{children:"100"})]})}let m=i.q.now().formatAsDateString();function DateSelect(e){let onInput=t=>{e.onChange(new Date(t))};return(0,n.jsx)("input",{type:"date",value:e.valueDateString||m,onChange:e=>onInput(e.target.value)})}function DateButtons(e){let t=u.useMemo(()=>{let t=i.q.now().startOfDay().formatAsHnSeconds(),r=i.q.fromDateString({dateString:e.date}).endOfDay().formatAsHnSeconds();return r<t},[e.date]);return(0,n.jsxs)("div",{className:"flex justify-between underline",children:[(0,n.jsx)("button",{onClick:e.onClickYesterday,children:"Previous Day"}),t?(0,n.jsx)("button",{onClick:e.onClickTomorrow,children:"Next Day"}):(0,n.jsx)("div",{})]})}function useFrontPageSort(e,t){if(!e)return;let r=[...e.hits].sort("Sort by points"===t?sortByPoints:sortByComments);return{...e,hits:r}}function sortByPoints(e,t){return t.points-e.points}function sortByComments(e,t){return t.num_comments-e.num_comments}function SortOptions(e){return(0,n.jsx)("div",{className:"flex flex-wrap items-center gap-2 border border-gray-300 p-2 rounded mb-2",children:["Sort by points","Sort by comments","Unsorted"].map(t=>(0,n.jsx)(d.E,{value:t,label:t,checked:t===e.value,onChange:r=>e.onChange(t)},t))})}},1983:function(e,t,r){"use strict";r.d(t,{a:function(){return LoadingScreen}});var n=r(7437),s=r(2265);let a=["⊖_⊖","⊜_⊜","⊙_⊙"];function LoadingScreen(){let[e,t]=s.useState(0);return useTimeout(()=>{let r=(e+1)%a.length;t(r)},2e3*Math.random()),(0,n.jsxs)("div",{className:"flex flex-col items-center py-40 w-full",children:[(0,n.jsx)("p",{className:"text-3xl font-mono text-gray-600 pb-10",children:"Loading..."}),(0,n.jsx)("p",{className:"text-4xl font-mono whitespace-pre text-gray-400",children:a[e]})]})}function useTimeout(e,t){s.useEffect(()=>{let r=setTimeout(()=>{e()},t);return()=>{clearTimeout(r)}},[e,t])}},7766:function(e,t,r){"use strict";r.d(t,{_:function(){return getFromNowStr},q:function(){return Time}});var n=r(4548),s=r.n(n),a=r(6537),i=r.n(a);function getFromNowStr(e){return s()(e).fromNow()}s().extend(i());let Time=class Time{static fromIso(e){let t=Number(s()(e.dateIso).toDate());return new Time(t)}static fromHn(e){return new Time(1e3*e.seconds)}static fromDateString(e){let t=Number(s()(e.dateString,"YYYY-MM-DD").toDate());return new Time(t)}static fromDateObj(e){let t=Number(s()(e.dateObj).toDate());return new Time(t)}static now(){let e=Number(s()(new Date).toDate());return new Time(e)}formatAsHnSeconds(){return Math.round(this.ms/1e3)}formatFromNow(){return s()(this.ms).fromNow()}formatAsDateString(){return s()(this.ms).format("YYYY-MM-DD")}endOfDay(){let e=s()(this.ms).set("hours",23).set("minutes",59).set("seconds",59);return this.ms=Number(e.toDate()),this}startOfDay(){let e=s()(this.ms).set("hours",0).set("minutes",0).set("seconds",1);return this.ms=Number(e.toDate()),this}setClockNow(){let e=s()(new Date);return this.ms=Number(s()(this.ms).set("hours",e.hour()).set("minute",e.minute()).toDate()),this}subtract1Day(){return this.ms=Number(s()(this.ms).subtract(24,"hours").toDate()),this}add1Day(){return this.ms=Number(s()(this.ms).add(24,"hours").toDate()),this}constructor(e){this.ms=e}}},2154:function(e,t,r){"use strict";r.d(t,{Fs:function(){return useSetUrlQueryParams},OZ:function(){return useHnQueryUrlParams},kI:function(){return usePageFromParams}});var n=r(7766),s=r(4300);let a={page:"1",perPage:"50",date:n.q.now().formatAsDateString()};function usePageFromParams(){let e=useHnQueryUrlParams();return e.page}function useHnQueryUrlParams(){let{currentParams:e}=(0,s.K)({defaultParams:a});return e}function useSetUrlQueryParams(){let{patchQueryParams:e}=(0,s.K)({defaultParams:a});return{patchQueryParams:e}}},1358:function(e,t,r){"use strict";r.d(t,{t:function(){return useIsMounted}});var n=r(2265);function useIsMounted(){let[e,t]=n.useState(!1);return n.useEffect(()=>{t(!0)},[]),e}},4300:function(e,t,r){"use strict";r.d(t,{K:function(){return useQueryParams}});var n=r(4033),s=r(2265);function useSearchParamsWrapper(e){let t=(0,n.useSearchParams)(),[r,a]=s.useState(e);return s.useEffect(()=>{let n=Array.from(t.entries()).some(t=>{let[n,s]=t;return null!=e[n]&&r[n]!==s});if(n){let n=Object.entries(e).reduce((e,r)=>{let[n,s]=r;return e[n]=t.get(n)||s,e},{});a({...r,...n})}},[e,t,r]),r}function useQueryParams(e){let t=useSearchParamsWrapper(e.defaultParams),r=(0,n.useRouter)(),a=(0,n.usePathname)(),i=s.useCallback(e=>{let t=new URLSearchParams(window.location.search),n=Array.from(t.entries()).reduce((e,t)=>{let[r,n]=t;return e[r]=n,e},{}),s={...n,...e},i=Object.entries(s).map(e=>{let[t,r]=e;return"".concat(t,"=").concat(r)}).join("&");r.push(a+"?".concat(i))},[a,r]);return{currentParams:t,patchQueryParams:i}}},1396:function(e,t,r){e.exports=r(8326)}}]);