(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[269],{6902:function(e){var t,n,r,s,i,a,l,o,u,c,d,h,f,m,x,p,y,v,g,$,M;e.exports=(t="millisecond",n="second",r="minute",s="hour",i="week",a="month",l="quarter",o="year",u="date",c="Invalid Date",d=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},(x={})[m="en"]={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||"th")+"]"}},p=function(e){return e instanceof $},y=function e(t,n,r){var s;if(!t)return m;if("string"==typeof t){var i=t.toLowerCase();x[i]&&(s=i),n&&(x[i]=n,s=i);var a=t.split("-");if(!s&&a.length>1)return e(a[0])}else{var l=t.name;x[l]=t,s=l}return!r&&s&&(m=s),s||!r&&m},v=function(e,t){if(p(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new $(n)},(g={s:f,z:function(e){var t=-e.utcOffset(),n=Math.abs(t);return(t<=0?"+":"-")+f(Math.floor(n/60),2,"0")+":"+f(n%60,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),s=t.clone().add(r,a),i=n-s<0,l=t.clone().add(r+(i?-1:1),a);return+(-(r+(n-s)/(i?s-l:l-s))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return({M:a,y:o,w:i,d:"day",D:u,h:s,m:r,s:n,ms:t,Q:l})[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}}).l=y,g.i=p,g.w=function(e,t){return v(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})},M=($=function(){function e(e){this.$L=y(e.locale,null,!0),this.parse(e)}var f=e.prototype;return f.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(g.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(d);if(r){var s=r[2]-1||0,i=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},f.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},f.$utils=function(){return g},f.isValid=function(){return this.$d.toString()!==c},f.isSame=function(e,t){var n=v(e);return this.startOf(t)<=n&&n<=this.endOf(t)},f.isAfter=function(e,t){return v(e)<this.startOf(t)},f.isBefore=function(e,t){return this.endOf(t)<v(e)},f.$g=function(e,t,n){return g.u(e)?this[t]:this.set(n,e)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(e,t){var l=this,c=!!g.u(t)||t,d=g.p(e),h=function(e,t){var n=g.w(l.$u?Date.UTC(l.$y,t,e):new Date(l.$y,t,e),l);return c?n:n.endOf("day")},f=function(e,t){return g.w(l.toDate()[e].apply(l.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(t)),l)},m=this.$W,x=this.$M,p=this.$D,y="set"+(this.$u?"UTC":"");switch(d){case o:return c?h(1,0):h(31,11);case a:return c?h(1,x):h(0,x+1);case i:var v=this.$locale().weekStart||0,$=(m<v?m+7:m)-v;return h(c?p-$:p+(6-$),x);case"day":case u:return f(y+"Hours",0);case s:return f(y+"Minutes",1);case r:return f(y+"Seconds",2);case n:return f(y+"Milliseconds",3);default:return this.clone()}},f.endOf=function(e){return this.startOf(e,!1)},f.$set=function(e,i){var l,c=g.p(e),d="set"+(this.$u?"UTC":""),h=((l={}).day=d+"Date",l[u]=d+"Date",l[a]=d+"Month",l[o]=d+"FullYear",l[s]=d+"Hours",l[r]=d+"Minutes",l[n]=d+"Seconds",l[t]=d+"Milliseconds",l)[c],f="day"===c?this.$D+(i-this.$W):i;if(c===a||c===o){var m=this.clone().set(u,1);m.$d[h](f),m.init(),this.$d=m.set(u,Math.min(this.$D,m.daysInMonth())).$d}else h&&this.$d[h](f);return this.init(),this},f.set=function(e,t){return this.clone().$set(e,t)},f.get=function(e){return this[g.p(e)]()},f.add=function(e,t){var l,u=this;e=Number(e);var c=g.p(t),d=function(t){var n=v(u);return g.w(n.date(n.date()+Math.round(t*e)),u)};if(c===a)return this.set(a,this.$M+e);if(c===o)return this.set(o,this.$y+e);if("day"===c)return d(1);if(c===i)return d(7);var h=((l={})[r]=6e4,l[s]=36e5,l[n]=1e3,l)[c]||1,f=this.$d.getTime()+e*h;return g.w(f,this)},f.subtract=function(e,t){return this.add(-1*e,t)},f.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||c;var r=e||"YYYY-MM-DDTHH:mm:ssZ",s=g.z(this),i=this.$H,a=this.$m,l=this.$M,o=n.weekdays,u=n.months,d=function(e,n,s,i){return e&&(e[n]||e(t,r))||s[n].slice(0,i)},f=function(e){return g.s(i%12||12,e,"0")},m=n.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},x={YY:String(this.$y).slice(-2),YYYY:g.s(this.$y,4,"0"),M:l+1,MM:g.s(l+1,2,"0"),MMM:d(n.monthsShort,l,u,3),MMMM:d(u,l),D:this.$D,DD:g.s(this.$D,2,"0"),d:String(this.$W),dd:d(n.weekdaysMin,this.$W,o,2),ddd:d(n.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(i),HH:g.s(i,2,"0"),h:f(1),hh:f(2),a:m(i,a,!0),A:m(i,a,!1),m:String(a),mm:g.s(a,2,"0"),s:String(this.$s),ss:g.s(this.$s,2,"0"),SSS:g.s(this.$ms,3,"0"),Z:s};return r.replace(h,function(e,t){return t||x[e]||s.replace(":","")})},f.utcOffset=function(){return-(15*Math.round(this.$d.getTimezoneOffset()/15))},f.diff=function(e,t,u){var c,d=g.p(t),h=v(e),f=(h.utcOffset()-this.utcOffset())*6e4,m=this-h,x=g.m(this,h);return x=((c={})[o]=x/12,c[a]=x,c[l]=x/3,c[i]=(m-f)/6048e5,c.day=(m-f)/864e5,c[s]=m/36e5,c[r]=m/6e4,c[n]=m/1e3,c)[d]||m,u?x:g.a(x)},f.daysInMonth=function(){return this.endOf(a).$D},f.$locale=function(){return x[this.$L]},f.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=y(e,t,!0);return r&&(n.$L=r),n},f.clone=function(){return g.w(this.$d,this)},f.toDate=function(){return new Date(this.valueOf())},f.toJSON=function(){return this.isValid()?this.toISOString():null},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},e}()).prototype,v.prototype=M,[["$ms",t],["$s",n],["$m",r],["$H",s],["$W","day"],["$M",a],["$y",o],["$D",u]].forEach(function(e){M[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),v.extend=function(e,t){return e.$i||(e(t,$,v),e.$i=!0),v},v.locale=y,v.isDayjs=p,v.unix=function(e){return v(1e3*e)},v.en=x[m],v.Ls=x,v.p={},v)},3432:function(e){e.exports=function(e,t,n){e=e||{};var r=t.prototype,s={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function i(e,t,n,s){return r.fromToBase(e,t,n,s)}n.en.relativeTime=s,r.fromToBase=function(t,r,i,a,l){for(var o,u,c,d=i.$locale().relativeTime||s,h=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],f=h.length,m=0;m<f;m+=1){var x=h[m];x.d&&(o=a?n(t).diff(i,x.d,!0):i.diff(t,x.d,!0));var p=(e.rounding||Math.round)(Math.abs(o));if(c=o>0,p<=x.r||!x.r){p<=1&&m>0&&(x=h[m-1]);var y=d[x.l];l&&(p=l(""+p)),u="string"==typeof y?y.replace("%d",p):y(p,r,x.l,c);break}}if(r)return u;var v=c?d.future:d.past;return"function"==typeof v?v(u):v.replace("%s",u)},r.to=function(e,t){return i(e,t,this,!0)},r.from=function(e,t){return i(e,t,this)};var a=function(e){return e.$u?n.utc():n()};r.toNow=function(e){return this.to(a(this),e)},r.fromNow=function(e){return this.from(a(this),e)}}},3510:function(e,t,n){Promise.resolve().then(n.bind(n,9327))},8645:function(e,t,n){"use strict";n.d(t,{d:function(){return s}});var r=n(9268);function s(e){return(0,r.jsx)("a",{href:e.href,target:"_blank",referrerPolicy:"no-referrer",className:"hover:underline "+e.className,children:e.children})}n(6006)},9327:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var r,s,i=n(9268),a=n(6006);let l=async e=>fetch("https://hn.algolia.com/api/v1/items/".concat(e)).then(e=>e.json()),o=()=>{let[e,t]=a.useState();return a.useEffect(()=>{let e=window.location.search,n=new URLSearchParams(e);t(n)},[]),e};var u=n(4824),c=n(7026),d=n(6902),h=n.n(d),f=n(3432),m=n.n(f),x=n(8645);h().extend(m());let p=e=>{let t=e.story.children;return(0,i.jsx)("div",{className:"font-sans",children:(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)(y,{story:e.story,commentCount:e.commentCount,filterOptions:e.filterOptions}),t.map(t=>(0,i.jsx)(v,{comment:t,filterText:e.filterText},t.id))]})})};function y(e){let{story:t,commentCount:n,filterOptions:r}=e,s=t.id,a=t.url,l=t.title;return(0,i.jsxs)("div",{className:"flex flex-col text-gray-700",children:[(0,i.jsxs)("div",{className:"flex gap-2 items-center justify-between",children:[(0,i.jsx)(x.d,{href:a,children:(0,i.jsx)("h1",{className:"text flex items-center gap-2",children:l})}),(0,i.jsx)(x.d,{href:"https://news.ycombinator.com/item?id=".concat(s),className:"text-xs flex-shrink-0",children:"(back to hn)"})]}),(0,i.jsxs)("div",{className:"text-xs",children:[t.points," points by ",t.author," ",b(t.created_at)," | ",n," comments"]}),(0,i.jsx)("div",{className:"border border-gray-300 p-2 rounded mt-2",children:r})]})}let v=e=>{let{comment:t,filterText:n}=e,r=t._textMarked||t.text||"<i>[deleted]<i/>",s=function(e,t){let[n,r]=(0,a.useState)(!1),s=!e;a.useEffect(()=>{r(!!t&&s)},[t,s]);let i=a.useCallback(()=>r(!0),[]),l=a.useCallback(()=>r(!1),[]);return{isCollapsed:n,onCollapse:i,onExpand:l}}(t._textMarked,n),l=function(e){let[t,n]=(0,a.useState)(!1);a.useEffect(()=>{e&&n(!1)},[e]);let r=a.useCallback(()=>n(!0),[]),s=a.useCallback(()=>n(!1),[]);return{isCollapsed:t,onCollapse:r,onExpand:s}}(n);return(0,i.jsx)(g,{id:t.id,html:r,comments:t.children,isTextCollapsed:s.isCollapsed,isThreadCollapsed:l.isCollapsed,header:(0,i.jsx)($,{comment:t,expanderThread:(0,i.jsx)(M,{isCollapsed:l.isCollapsed,onCollapse:l.onCollapse,onExpand:l.onExpand}),expanderText:(0,i.jsx)(M,{isCollapsed:s.isCollapsed,onCollapse:s.onCollapse,onExpand:s.onExpand})}),filterText:n})};function g(e){let{id:t,comments:n,header:r,isTextCollapsed:s,isThreadCollapsed:a,filterText:l,html:o}=e;return(0,i.jsxs)("ul",{className:"list-decimal bg-black bg-opacity-5 rounded pl-1 sm:pl-2",children:[(0,i.jsxs)("div",{id:t+"",children:[r,!(a||s)&&(0,i.jsx)("div",{className:"text-xs pb-1 pr-2 break-words",dangerouslySetInnerHTML:{__html:o}})]}),!a&&(0,i.jsx)("div",{className:"flex flex-col gap-2",children:n.map(e=>(0,i.jsx)(v,{comment:e,filterText:l},e.id))})]})}function $(e){let{comment:t,expanderThread:n,expanderText:r}=e,s="https://news.ycombinator.com/item?id=".concat(t.id),a="https://news.ycombinator.com/user?id=".concat(t.author);return(0,i.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 text-xs py-1",children:[(0,i.jsx)(x.d,{href:a,className:"flex-shrink-0",children:t.author}),(0,i.jsx)(x.d,{href:s,className:"flex-shrink-0 line-clamp-1",children:b(t.created_at)}),(0,i.jsx)("div",{className:"",children:n}),(0,i.jsx)("div",{className:"w-full"}),(0,i.jsx)("div",{className:"pr-2",children:r})]})}function M(e){let{isCollapsed:t,onExpand:n,onCollapse:r}=e,s=a.useCallback(()=>{t?n():r()},[t,r,n]);return(0,i.jsxs)("button",{onClick:s,children:["[",t?"+":"-","]"]})}function b(e){return h()(e).fromNow()}let j=a.forwardRef(function({title:e,titleId:t,...n},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?a.createElement("title",{id:t},e):null,a.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.72 6.97a.75.75 0 10-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 101.06 1.06L12 13.06l1.72 1.72a.75.75 0 101.06-1.06L13.06 12l1.72-1.72a.75.75 0 10-1.06-1.06L12 10.94l-1.72-1.72z",clipRule:"evenodd"}))}),w=()=>(0,i.jsx)(u.QueryClientProvider,{client:c.E,children:(0,i.jsx)(S,{})}),S=()=>{let[e,t]=a.useState("Sort by response count"),[n,r]=a.useState(""),s=o(),c=null==s?void 0:s.get("id"),d=(0,u.useQuery)("post"+c,()=>l(c+""),{enabled:null!=c}),[h,f]=function(e,t){let[n,r]=(0,a.useState)(e),[s,i]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{i(!0);let n=setTimeout(()=>{r(e),i(!1)},t);return()=>{clearTimeout(n)}},[e,t]),[n,s]}(n,400),m=d.data,x=D(m,e),p=function(e){if(!e)return 0;let t=function e(t){let n=t.reduce((t,n)=>t+e(n.children),0);return t.length+n}(e.children);return t}(m),y=function(e,t){let n=(0,a.useMemo)(()=>{if(e)return function(e,t){let n={...e},r=n.children.reduce((e,n)=>{let r=function e(t,n){let r=0;if(n){let e=function(e,t){var n;let r=RegExp(t.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&"),"ig"),s=(null===(n=e.match(r))||void 0===n?void 0:n.length)||0;if(!s)return{htmlNew:void 0,numReplacements:s};let i=e.replaceAll(r,"<mark>$&</mark>");return{htmlNew:i,numReplacements:s}}(t.text||"",n);r+=e.numReplacements,t._textMarked=e.htmlNew}else t._textMarked=void 0;return t.children.forEach(t=>{r+=e(t,n)}),r}(n,t);return e+r},0);return{data:n,markCount:r}}(e,t)},[e,t]);return n}(x,h),v=null==y?void 0:y.markCount,g=(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,i.jsx)(k,{onChange:t,value:e}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("div",{className:"flex-grow",children:(0,i.jsx)(T,{onChange:r,value:n})}),(0,i.jsx)("div",{className:"flex-shrink-0",children:null!=v&&(0,i.jsx)(C,{count:v,loading:f,filterText:n})})]})]}),$=N(null==y?void 0:y.data,h,p,g);return(0,i.jsxs)("div",{className:"flex flex-col py-1 px-2",children:[d.isLoading&&d.isFetching&&(0,i.jsx)("div",{children:"Loading..."}),$]})};function C(e){return e.filterText?e.loading?(0,i.jsx)("div",{children:"Searching..."}):(0,i.jsxs)("div",{children:["Found ",e.count," results"]}):(0,i.jsx)("div",{className:"w-20"})}let N=(e,t,n,r)=>{let s=(0,a.useMemo)(()=>e&&(0,i.jsx)(p,{story:e,filterText:t,commentCount:n,filterOptions:r}),[e,t,n,r]);return s},D=(e,t)=>{let n=(0,a.useMemo)(()=>e?function(e,t){if(!e)return e;let n=JSON.parse(JSON.stringify(e));if(t.byThreadDepth){let e=(t,n)=>{let r=n.children||[];if(!r.length)return t;let s=r.reduce((n,r)=>{let s=e(t+1,r);return s>n?s:n},0);return s},t=(t,n)=>e(0,n)-e(0,t),r=e=>(e.children.sort(t),e.children.forEach(e=>{r(e)}),e.children);console.time("sort byThreadDepth"),n.children=r(n),console.timeEnd("sort byThreadDepth")}return t.byResponseCount&&(console.time("sort byResponseCount"),n.children=n.children.sort((e,t)=>t.children.length-e.children.length),console.timeEnd("sort byResponseCount")),n}(e,{byResponseCount:"Sort by response count"===t,byThreadDepth:"Sort by thread length"===t}):void 0,[e,t]);return n};function T(e){return(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("input",{className:"border rounded-md px-1 w-full",placeholder:"Filter comments...",onChange:t=>e.onChange(t.target.value),value:e.value}),(0,i.jsx)("button",{onClick:()=>e.onChange(""),className:"-ml-6 text-gray-400",children:(0,i.jsx)(j,{width:20})})]})}function k(e){return(0,i.jsx)("div",{className:"flex items-center gap-2",children:["Sort by response count","Sort by thread length"].map(t=>(0,i.jsx)(O,{value:t,label:t,checked:t===e.value,onChange:n=>e.onChange(t)},t))})}function O(e){let{label:t,value:n,checked:r,onChange:s}=e;return(0,i.jsxs)("label",{className:"text-xs flex items-center gap-1",children:[(0,i.jsx)("input",{type:"radio",value:n,checked:r,onChange:s}),t]})}(r=s||(s={})).byResponseCount="Sort by response count",r.byThreadDepth="Sort by thread length";let _=()=>{let[e,t]=a.useState(!1);a.useEffect(()=>{t(!0)},[]);let n=a.useMemo(()=>e?(0,i.jsx)(w,{}):null,[e]);return n};var E=_},7026:function(e,t,n){"use strict";n.d(t,{E:function(){return a}});var r=n(4824),s=n(9829),i=n(8550);let a=new r.QueryClient({defaultOptions:{queries:{cacheTime:36e5}}}),l=(0,s.O)({storage:(()=>{try{return window.localStorage}catch(e){return null}})()});(0,i.w)({queryClient:a,persistor:l,maxAge:36e5,hydrateOptions:{},dehydrateOptions:{}})}},function(e){e.O(0,[303,667,139,744],function(){return e(e.s=3510)}),_N_E=e.O()}]);